<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debt Payoff Strategy - Williams Household</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header .subtitle {
            font-size: 1.1em;
            opacity: 0.95;
            font-weight: 300;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 40px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-left: 4px solid #667eea;
        }

        .stat-card.critical {
            border-left-color: #ef4444;
        }

        .stat-card.warning {
            border-left-color: #f59e0b;
        }

        .stat-card.success {
            border-left-color: #10b981;
        }

        .stat-card h3 {
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #6b7280;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .stat-card .value {
            font-size: 2.2em;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .stat-card .detail {
            font-size: 0.9em;
            color: #6b7280;
        }

        .section {
            padding: 40px;
        }

        .section h2 {
            font-size: 1.8em;
            margin-bottom: 25px;
            color: #1f2937;
            font-weight: 700;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .strategy-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .strategy-box h3 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .strategy-box p {
            color: #4b5563;
            margin-bottom: 10px;
            line-height: 1.8;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.95em;
        }

        table thead {
            background: #667eea;
            color: white;
        }

        table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        table tbody tr:hover {
            background: #f9fafb;
        }

        .highlight-row {
            background: #fef3c7;
            font-weight: 600;
        }

        .critical-row {
            background: #fee2e2;
        }

        .success-row {
            background: #d1fae5;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge.urgent {
            background: #fee2e2;
            color: #991b1b;
        }

        .badge.high {
            background: #fef3c7;
            color: #92400e;
        }

        .badge.medium {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge.low {
            background: #d1fae5;
            color: #065f46;
        }

        .timeline {
            position: relative;
            padding-left: 40px;
            margin: 30px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #667eea;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -33px;
            top: 5px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #667eea;
            border: 3px solid white;
            box-shadow: 0 0 0 3px #667eea;
        }

        .timeline-item.complete::before {
            background: #10b981;
            box-shadow: 0 0 0 3px #10b981;
        }

        .timeline-item h4 {
            color: #1f2937;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .timeline-item p {
            color: #6b7280;
            font-size: 0.95em;
            margin-bottom: 5px;
        }

        .timeline-item .amount {
            font-weight: 700;
            color: #667eea;
        }

        .action-box {
            background: #667eea;
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .action-box h3 {
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .action-box ul {
            list-style: none;
        }

        .action-box li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            font-size: 1.05em;
        }

        .action-box li:last-child {
            border-bottom: none;
        }

        .action-box li::before {
            content: '‚úì';
            margin-right: 15px;
            font-weight: 700;
            font-size: 1.2em;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .comparison-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .comparison-card:hover {
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .comparison-card.recommended {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea05 0%, #764ba205 100%);
        }

        .comparison-card h4 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #1f2937;
        }

        .comparison-card .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .comparison-card .metric:last-child {
            border-bottom: none;
        }

        .comparison-card .metric-label {
            color: #6b7280;
            font-size: 0.9em;
        }

        .comparison-card .metric-value {
            font-weight: 700;
            color: #1f2937;
        }

        .alert {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid;
        }

        .alert.critical {
            background: #fef2f2;
            border-left-color: #ef4444;
            color: #991b1b;
        }

        .alert.warning {
            background: #fffbeb;
            border-left-color: #f59e0b;
            color: #92400e;
        }

        .alert.info {
            background: #eff6ff;
            border-left-color: #3b82f6;
            color: #1e40af;
        }

        .alert.success {
            background: #f0fdf4;
            border-left-color: #10b981;
            color: #065f46;
        }

        .progress-bar {
            background: #e5e7eb;
            border-radius: 10px;
            height: 25px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 0.85em;
        }

        footer {
            background: #1f2937;
            color: #9ca3af;
            padding: 30px 40px;
            text-align: center;
            font-size: 0.9em;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            header {
                background: #667eea !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Debt Payoff Strategy</h1>
            <p class="subtitle">Williams Household | Analysis Date: November 21, 2025</p>
        </header>

        <!-- Hero Stats -->
        <div class="stats-grid">
            <div class="stat-card critical">
                <h3>Total Debt</h3>
                <div class="value">$924,231</div>
                <div class="detail">28 accounts</div>
            </div>
            <div class="stat-card warning">
                <h3>Monthly Debt Service</h3>
                <div class="value">$11,185</div>
                <div class="detail">45.7% DTI (high)</div>
            </div>
            <div class="stat-card success">
                <h3>Debt-Free Timeline</h3>
                <div class="value">8.3 years</div>
                <div class="detail">March 2034 (unsecured)</div>
            </div>
            <div class="stat-card">
                <h3>Interest Saved</h3>
                <div class="value">$30,920</div>
                <div class="detail">vs. snowball method</div>
            </div>
            <div class="stat-card critical">
                <h3>Emergency Fund</h3>
                <div class="value">$300</div>
                <div class="detail">CRITICAL - Need $1,000 ASAP</div>
            </div>
            <div class="stat-card warning">
                <h3>Promotional Risk</h3>
                <div class="value">$1,972</div>
                <div class="detail">Deferred interest at risk</div>
            </div>
        </div>

        <!-- Critical Alerts -->
        <div class="section">
            <div class="alert critical">
                <strong>URGENT ACTION REQUIRED:</strong> Ashley PayPal Credit is $41 past due. Pay $92 minimum IMMEDIATELY to avoid penalty APR (34.74%) on new purchases.
            </div>
            <div class="alert warning">
                <strong>PROMOTIONAL DEADLINES:</strong> 6 promotional balances totaling $5,739.61 must be paid by deadlines (Jan-May 2026) to save $1,972.22 in deferred interest.
            </div>
            <div class="alert info">
                <strong>MMI PROGRAM:</strong> 8 credit cards enrolled in MMI debt management at negotiated rates (3.2%-16.3%). Monthly commitment: $1,751 (LOCKED). Recent rate reductions saving $162/month.
            </div>
        </div>

        <!-- Recommended Strategy -->
        <div class="section">
            <h2>Recommended Strategy: Hybrid Avalanche (Promos First)</h2>
            <div class="strategy-box">
                <h3>Defend Deadlines First, Then Attack by APR</h3>
                <p><strong>Phase 1 (Dec 2025 - May 2026):</strong> Eliminate 6 promotional balances ($5,739.61) by deadlines ‚Üí Save $1,972.22 in deferred interest</p>
                <p><strong>Phase 2 (Jun 2026+):</strong> Attack non-MMI debts in strict APR order (highest first): PayPal 30.14%, Amex 28.74%, Capital One 27.99%, SoFi 17.89%, Aven 13.49%, Johns Hopkins 401k Loan 2 @ 8.50%</p>
                <p><strong>MMI Debts:</strong> Continue $1,751/month as committed until program completion (2029-2031)</p>
                <p><strong>Expected Results:</strong> Unsecured debt-free March 2034 (100 months) | Total interest: $67,845 | Savings vs snowball: $30,920</p>
            </div>
        </div>

        <!-- Strategy Comparison -->
        <div class="section">
            <h2>Strategy Comparison</h2>
            <div class="comparison-grid">
                <div class="comparison-card recommended">
                    <h4>Hybrid Avalanche ‚≠ê</h4>
                    <div class="metric">
                        <span class="metric-label">Total Interest</span>
                        <span class="metric-value">$67,845</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Debt-Free Date</span>
                        <span class="metric-value">Mar 2034</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Timeline</span>
                        <span class="metric-value">100 months</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Year 1 Wins</span>
                        <span class="metric-value">8 accounts</span>
                    </div>
                </div>

                <div class="comparison-card">
                    <h4>Pure Avalanche</h4>
                    <div class="metric">
                        <span class="metric-label">Total Interest</span>
                        <span class="metric-value">$71,790</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Debt-Free Date</span>
                        <span class="metric-value">Jul 2034</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Timeline</span>
                        <span class="metric-value">104 months</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Flaw</span>
                        <span class="metric-value" style="color: #ef4444;">Loses $1,972 to promos</span>
                    </div>
                </div>

                <div class="comparison-card">
                    <h4>Snowball</h4>
                    <div class="metric">
                        <span class="metric-label">Total Interest</span>
                        <span class="metric-value" style="color: #ef4444;">$98,765</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Debt-Free Date</span>
                        <span class="metric-value">Nov 2036</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Timeline</span>
                        <span class="metric-value">132 months</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Year 1 Wins</span>
                        <span class="metric-value">10 accounts</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Promotional Deadlines -->
        <div class="section">
            <h2>Promotional Balance Defense (PRIORITY)</h2>
            <table id="promotional-table">
                <thead>
                    <tr>
                        <th>Debt</th>
                        <th>Balance</th>
                        <th>Monthly Payment</th>
                        <th>Deadline</th>
                        <th>Days Left</th>
                        <th>Deferred Interest</th>
                        <th>Priority</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamically populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Victory Path -->
        <div class="section">
            <h2>Your Victory Path (Avalanche Order After Promos)</h2>
            <table id="victory-path-table">
                <thead>
                    <tr>
                        <th>Priority</th>
                        <th>Debt</th>
                        <th>Balance</th>
                        <th>Monthly Payment</th>
                        <th>APR</th>
                        <th>Monthly Interest</th>
                        <th>Est. Payoff</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamically populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Key Milestones -->
        <div class="section">
            <h2>Major Milestones Timeline</h2>
            <div class="timeline">
                <div class="timeline-item complete">
                    <h4>November 2025 - Phase 1 Complete ‚úì</h4>
                    <p>Paid $1,763.57: Marriott Amex $750 + CareCredit $335.86 + Navy Federal Auto $677.71</p>
                    <p class="amount">Saved $49.94 deferred interest | Brought Marriott under limit | Auto past due cleared</p>
                </div>

                <div class="timeline-item">
                    <h4>May 2026 - All Promos Eliminated</h4>
                    <p>6 promotional balances paid in full</p>
                    <p class="amount">SAVED: $1,972.22 in deferred interest | 7 accounts closed</p>
                </div>

                <div class="timeline-item">
                    <h4>April 2027 - All High-APR Cards Gone</h4>
                    <p>Amex + Capital One cards eliminated (28-29% APR)</p>
                    <p class="amount">No more 28%+ debts | Monthly interest reduced by $285</p>
                </div>

                <div class="timeline-item">
                    <h4>August 2029 - SOFI ELIMINATED üéâ</h4>
                    <p>Highest-rate significant debt paid off</p>
                    <p class="amount">Frees $1,042.78/month | Saves $606.78/month interest | MAJOR VICTORY</p>
                </div>

                <div class="timeline-item">
                    <h4>August 2033 - 401k Loan 2 Freedom</h4>
                    <p>Johns Hopkins 401k Loan 2 eliminated</p>
                    <p class="amount">Frees $828.53/month for retirement | Contributions restored 4 years early</p>
                </div>

                <div class="timeline-item">
                    <h4>March 2034 - UNSECURED DEBT FREE! üéä</h4>
                    <p>All unsecured debts eliminated (except SBA EIDL minimums)</p>
                    <p class="amount">100 months of discipline pays off | $30,920 saved vs snowball | FREEDOM!</p>
                </div>
            </div>
        </div>

        <!-- 401k Loans Analysis -->
        <div class="section">
            <h2>Johns Hopkins 401k Loans - Critical Analysis</h2>
            <table>
                <thead>
                    <tr>
                        <th>Loan</th>
                        <th>Balance</th>
                        <th>APR</th>
                        <th>Payment</th>
                        <th>Payments Left</th>
                        <th>Payoff Date</th>
                        <th>Strategy</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="success-row">
                        <td>Loan 1</td>
                        <td>$4,398.64</td>
                        <td>4.25%</td>
                        <td>$322.60</td>
                        <td>14</td>
                        <td>Jan 2026</td>
                        <td>Pay on schedule - nearly done!</td>
                    </tr>
                    <tr class="critical-row">
                        <td>Loan 2</td>
                        <td>$35,360.58</td>
                        <td><strong>8.50%</strong></td>
                        <td>$828.53</td>
                        <td>51</td>
                        <td>Feb 2029</td>
                        <td><strong>Accelerate after SoFi eliminated</strong></td>
                    </tr>
                </tbody>
            </table>

            <div class="alert warning">
                <strong>CRITICAL CONCERN - 401k Loan 2:</strong> 8.50% APR is HIGHER than SPS mortgage (8.375%) and most MMI debts. This loan has DOUBLE COST: (1) Not earning market returns (~8% historically) + (2) Paying 8.50% interest = ~$6,186/year total cost. Accelerating payoff would free $828.53/month for retirement contributions 4 years earlier.
            </div>
        </div>

        <!-- MMI Program -->
        <div class="section">
            <h2>MMI Debt Management Program</h2>
            <div class="alert success">
                <strong>PROGRAM SUCCESS:</strong> Recent Navy Federal rate reductions saving $162/month ($1,945/year). Average APR reduced from 9.45% to 6.87%. Continue $1,751/month commitment through 2029-2031 completion.
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Creditor</th>
                        <th>Balance</th>
                        <th>APR</th>
                        <th>Payment</th>
                        <th>Old APR</th>
                        <th>Savings/Month</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Navy Federal ***129382</td>
                        <td>$21,961.40</td>
                        <td>9.9%</td>
                        <td>$448.00</td>
                        <td>16.7%</td>
                        <td><strong>$124.46</strong></td>
                    </tr>
                    <tr>
                        <td>CHASE ***777509</td>
                        <td>$21,703.38</td>
                        <td>3.2%</td>
                        <td>$467.00</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>CHASE ***317277</td>
                        <td>$14,503.60</td>
                        <td>3.2%</td>
                        <td>$315.00</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Navy Federal ***065726</td>
                        <td>$9,953.69</td>
                        <td>9.9%</td>
                        <td>$248.00</td>
                        <td>14.1%</td>
                        <td><strong>$34.83</strong></td>
                    </tr>
                    <tr>
                        <td>Navy Federal ***561145</td>
                        <td>$4,431.10</td>
                        <td>16.3%</td>
                        <td>$93.00</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Synchrony Bank</td>
                        <td>$2,335.37</td>
                        <td>6.9%</td>
                        <td>$58.00</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Navy Federal ***566998</td>
                        <td>$1,531.21</td>
                        <td>9.9%</td>
                        <td>$47.00</td>
                        <td>12.1%</td>
                        <td><strong>$2.80</strong></td>
                    </tr>
                    <tr>
                        <td>CHASE ***125855</td>
                        <td>$1,359.17</td>
                        <td>5.3%</td>
                        <td>$35.00</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr class="success-row">
                        <td colspan="4"><strong>TOTAL MMI PROGRAM</strong></td>
                        <td><strong>Monthly Commitment</strong></td>
                        <td><strong>$1,751.00</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Your Next 3 Actions -->
        <div class="section">
            <div class="action-box">
                <h3>Your Next 3 Actions</h3>
                <ul>
                    <li><strong>This Week:</strong> PAY Ashley PayPal $92 minimum IMMEDIATELY (account is $41 past due). SET UP calendar alerts for all 6 promotional deadlines. TRANSFER $100 to emergency fund.</li>
                    <li><strong>This Month (December 2025):</strong> PAY first promotional balance (Ashley PayPal $78.60 standard balance). CONFIRM MMI payment ($1,751) processing correctly. CREATE debt tracker spreadsheet.</li>
                    <li><strong>By Month 2 (January 2026):</strong> ELIMINATE PayPal THORUM + DELTA promos ($544.84 total) by 01/11/26 deadline. BUILD emergency fund to $500. REVIEW MMI statements for rate reduction confirmation.</li>
                </ul>
            </div>
        </div>

        <!-- Progress Tracking -->
        <div class="section">
            <h2>Emergency Fund Progress</h2>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 1.2%;">
                    $300 of $24,500 (1.2%)
                </div>
            </div>
            <p style="text-align: center; color: #6b7280; margin-top: 10px;">
                <strong>Immediate Goal:</strong> $1,000 (4.1%) |
                <strong>Mid-Term Goal:</strong> $5,000 (20.4%) |
                <strong>Full Target:</strong> $24,500 (100%)
            </p>
        </div>

        <footer>
            <p>Generated on November 21, 2025 | Strategy: Hybrid Avalanche (Promos First)</p>
            <p>Files: debt-inventory-current.json, phase1-debt-analysis-current.json, phase2-strategy-comparison-current.json</p>
            <p style="margin-top: 15px;">Every $500 payment is progress. Every account closed is a victory. You've got this. üí™</p>
        </footer>
    </div>

    <script>
        // Dynamic Debt Dashboard - Loads data from JSON and calculates all totals

        // Helper function to format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2
            }).format(amount);
        }

        // Helper function to calculate days between dates
        function daysBetween(date1, date2) {
            const oneDay = 24 * 60 * 60 * 1000;
            return Math.round((date2 - date1) / oneDay);
        }

        // Load JSON data and populate tables
        async function loadDebtData() {
            try {
                const response = await fetch('debt-inventory-current.json');
                const data = await response.json();

                populatePromotionalTable(data);
                populateVictoryPathTable(data);

            } catch (error) {
                console.error('Error loading debt data:', error);
                // Fallback to static data if JSON fails to load
                document.getElementById('promotional-table').querySelector('tbody').innerHTML =
                    '<tr><td colspan="7" style="text-align: center; color: #ef4444;">Unable to load dynamic data. Please ensure debt-inventory-current.json is in the same directory.</td></tr>';
                document.getElementById('victory-path-table').querySelector('tbody').innerHTML =
                    '<tr><td colspan="7" style="text-align: center; color: #ef4444;">Unable to load dynamic data. Please ensure debt-inventory-current.json is in the same directory.</td></tr>';
            }
        }

        window.populatePromotionalTable = function(data) {
            const tbody = document.getElementById('promotional-table').querySelector('tbody');
            const today = new Date('2025-11-21');

            // Define promotional debts with their data
            const promoDebts = [
                {
                    name: 'PayPal THORUM Promo',
                    creditor: 'PayPal Credit - THORUM (Promo expires 01/11/26)',
                    deadline: '2026-01-11',
                    priority: 'urgent'
                },
                {
                    name: 'PayPal DELTA Promo 1',
                    creditor: 'PayPal Credit - DELTA (Promo expires 01/11/26)',
                    deadline: '2026-01-11',
                    priority: 'urgent'
                },
                {
                    name: 'CareCredit/Synchrony',
                    creditor: 'CareCredit/Synchrony (***1609)',
                    deadline: '2026-02-03',
                    priority: 'high'
                },
                {
                    name: 'PayPal DELTA Promo 2',
                    creditor: 'PayPal Credit - DELTA (Promo expires 02/11/26)',
                    deadline: '2026-02-11',
                    priority: 'high'
                },
                {
                    name: 'Container Store/Synchrony',
                    creditor: 'Container Store/Synchrony (***2961)',
                    deadline: '2026-04-03',
                    priority: 'high'
                },
                {
                    name: 'Ashley PayPal Promo',
                    creditor: 'Ashley PayPal Credit - Promo (expires 05/05/26)',
                    deadline: '2026-05-05',
                    priority: 'medium'
                }
            ];

            let totalBalance = 0;
            let totalPayment = 0;
            let totalDeferredInterest = 0;
            let rows = '';

            promoDebts.forEach(promo => {
                const debt = data.debts.find(d => d.creditorName === promo.creditor);
                if (debt) {
                    const balance = debt.promotionalAPR ? debt.promotionalAPR.promotionalBalance : debt.currentBalance;
                    const deferredInterest = debt.promotionalAPR ? debt.promotionalAPR.deferredInterestAtRisk : 0;
                    const payment = debt.minimumPayment;
                    const deadlineDate = new Date(promo.deadline);
                    const daysLeft = daysBetween(today, deadlineDate);

                    totalBalance += balance;
                    totalPayment += payment;
                    totalDeferredInterest += deferredInterest;

                    const rowClass = promo.priority === 'urgent' ? 'critical-row' :
                                    promo.priority === 'high' ? 'highlight-row' : '';
                    const badgeClass = promo.priority;

                    rows += `
                        <tr class="${rowClass}">
                            <td>${promo.name}</td>
                            <td>${formatCurrency(balance)}</td>
                            <td>${formatCurrency(payment)}</td>
                            <td>${promo.deadline.substring(5)}</td>
                            <td>${daysLeft}</td>
                            <td>${formatCurrency(deferredInterest)}</td>
                            <td><span class="badge ${badgeClass}">${promo.priority}</span></td>
                        </tr>
                    `;
                }
            });

            // Add total row
            rows += `
                <tr class="success-row">
                    <td><strong>TOTAL</strong></td>
                    <td><strong>${formatCurrency(totalBalance)}</strong></td>
                    <td><strong>${formatCurrency(totalPayment)}/mo</strong></td>
                    <td colspan="2"><strong>MUST DEFEND ALL</strong></td>
                    <td><strong>${formatCurrency(totalDeferredInterest)}</strong></td>
                    <td><strong>AT RISK</strong></td>
                </tr>
            `;

            tbody.innerHTML = rows;
        }

        window.populateVictoryPathTable = function(data) {
            const tbody = document.getElementById('victory-path-table').querySelector('tbody');

            // Define avalanche order (non-MMI, non-promotional debts sorted by APR descending)
            const victoryPath = [
                { creditor: 'PayPal Credit - Standard Balance', priority: 1, payoff: 'Jun 2026', tier: 'High APR (28%+)' },
                { creditor: 'Marriott Bonvoy Brilliant American Express (***81009)', priority: 2, payoff: 'Aug 2026', tier: 'High APR (28%+)' },
                { creditor: 'Delta SkyMiles Reserve American Express (***31004)', priority: 3, payoff: 'Nov 2026', tier: 'High APR (28%+)' },
                { creditor: 'Capital One VentureOne (***8540)', priority: 4, payoff: 'Jan 2027', tier: 'High APR (28%+)' },
                { creditor: 'Capital One QuicksilverOne (***8289)', priority: 5, payoff: 'Apr 2027', tier: 'High APR (28%+)' },
                { creditor: 'Ashley PayPal Credit - Standard Balance', priority: 6, payoff: 'May 2027', tier: 'High APR (28%+)' },
                { creditor: 'SoFi Personal Loan (PA-1468455)', priority: 7, payoff: 'Aug 2029', tier: 'Medium APR (10-28%)' },
                { creditor: 'Aven Credit Card (***321891)', priority: 8, payoff: 'Feb 2032', tier: 'Medium APR (10-28%)' },
                { creditor: 'Johns Hopkins 401k Loan 2', priority: 9, payoff: 'Aug 2033', tier: 'Low APR (<10%)' }
            ];

            let rows = '';
            let tierTotals = {};

            victoryPath.forEach(item => {
                const debt = data.debts.find(d => d.creditorName === item.creditor);
                if (debt) {
                    const balance = debt.currentBalance;
                    const payment = debt.minimumPayment;
                    const apr = debt.apr;
                    const monthlyInterest = (balance * (apr / 100)) / 12;

                    // Track tier totals
                    if (!tierTotals[item.tier]) {
                        tierTotals[item.tier] = { balance: 0, payment: 0, interest: 0, count: 0 };
                    }
                    tierTotals[item.tier].balance += balance;
                    tierTotals[item.tier].payment += payment;
                    tierTotals[item.tier].interest += monthlyInterest;
                    tierTotals[item.tier].count++;

                    const rowClass = item.priority <= 6 ? 'highlight-row' :
                                    item.priority === 7 ? 'critical-row' : '';

                    const debtName = debt.creditorName.includes('401k') ?
                        'Johns Hopkins 401k Loan 2' :
                        debt.creditorName.replace(/\s*\(.*?\)\s*/g, '').substring(0, 40);

                    rows += `
                        <tr class="${rowClass}">
                            <td>${item.priority}</td>
                            <td>${debtName}</td>
                            <td>${formatCurrency(balance)}</td>
                            <td>${formatCurrency(payment)}</td>
                            <td>${apr.toFixed(2)}%</td>
                            <td>${formatCurrency(monthlyInterest)}</td>
                            <td>${item.payoff}</td>
                        </tr>
                    `;

                    // Add tier summary after each tier ends
                    if (item.priority === 6 || item.priority === 8 || item.priority === 9) {
                        const tierData = tierTotals[item.tier];
                        rows += `
                            <tr style="background: #e0e7ff; font-weight: 600;">
                                <td colspan="2"><strong>${item.tier} TIER (${tierData.count} debts)</strong></td>
                                <td><strong>${formatCurrency(tierData.balance)}</strong></td>
                                <td><strong>${formatCurrency(tierData.payment)}/mo</strong></td>
                                <td colspan="2"><strong>${formatCurrency(tierData.interest)}/mo interest</strong></td>
                                <td><strong>${tierData.count} accounts</strong></td>
                            </tr>
                        `;
                    }
                }
            });

            tbody.innerHTML = rows;
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadDebtData);
    </script>
</body>
</html>
